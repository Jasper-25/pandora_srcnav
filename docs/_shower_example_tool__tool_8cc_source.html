<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pandora: larpandora/larpandora/LArPandoraEventBuilding/LArPandoraShower/Tools/ShowerExampleTool_tool.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pandora
   </div>
   <div id="projectbrief">Pandora source code navigator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_shower_example_tool__tool_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ShowerExampleTool_tool.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="_shower_example_tool__tool_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">//############################################################################</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">//### Name:        ShowerExampleTool                                       ###</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">//### Author:      Dominic Barker (dominic.barker@sheffield.ac.uk          ###</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">//### Date:        26.06.19                                                ###</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">//### Description: Example form of the shower tools                        ###</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">//############################################################################</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">//Framework Includes</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;art/Utilities/ToolMacros.h&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">//LArSoft Includes</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;lardataobj/RecoBase/Shower.h&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;lardataobj/RecoBase/Vertex.h&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="_i_shower_tool_8h.html">larpandora/LArPandoraEventBuilding/LArPandoraShower/Tools/IShowerTool.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_shower_reco_tools.html">ShowerRecoTools</a> {</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="foldopen" id="foldopen00018" data-start="{" data-end="};">
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html">   18</a></span>  <span class="keyword">class </span><a class="code hl_class" href="class_shower_reco_tools_1_1_shower_example_tool.html">ShowerExampleTool</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_shower_reco_tools_1_1_i_shower_tool.html">IShowerTool</a> {</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>  <span class="keyword">public</span>:</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>    <a class="code hl_class" href="class_shower_reco_tools_1_1_shower_example_tool.html">ShowerExampleTool</a>(<span class="keyword">const</span> fhicl::ParameterSet&amp; pset);</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <span class="comment">//Example Direction Finder</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#a9b7728eb8dd7690fcb8d0a267a71b106">CalculateElement</a>(<span class="keyword">const</span> art::Ptr&lt;recob::PFParticle&gt;&amp; pfparticle,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>                         art::Event&amp; Event,</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>                         <a class="code hl_class" href="classreco_1_1shower_1_1_shower_element_holder.html">reco::shower::ShowerElementHolder</a>&amp; ShowerEleHolder) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  <span class="keyword">private</span>:</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <span class="comment">//Function to initialise the producer i.e produces&lt;std::vector&lt;recob::Vertex&gt; &gt;(); commands go here.</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#ac90c73f61aaeb240d9d04e1d9d322f68">InitialiseProducers</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">//Function to add the assoctions</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#acf85d45c01af7b68c88846b41e236bae">AddAssociations</a>(<span class="keyword">const</span> art::Ptr&lt;recob::PFParticle&gt;&amp; pfpPtr,</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>                        art::Event&amp; Event,</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>                        <a class="code hl_class" href="classreco_1_1shower_1_1_shower_element_holder.html">reco::shower::ShowerElementHolder</a>&amp; ShowerEleHolder) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="comment">//prehaps you want a fcl parameter.</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html#a02c8d08463e7eda4ac89931287f9e59c">   38</a></span>    art::InputTag <a class="code hl_variable" href="class_shower_reco_tools_1_1_shower_example_tool.html#a02c8d08463e7eda4ac89931287f9e59c">fPFParticleLabel</a>;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html#a4638c0021dc15cfc0d003fb9a8759f2c">   39</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="class_shower_reco_tools_1_1_shower_example_tool.html#a4638c0021dc15cfc0d003fb9a8759f2c">fVerbose</a>;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>  };</div>
</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="foldopen" id="foldopen00042" data-start="{" data-end="}">
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html#ad4ee5f845fefc4901ea860a4788a4913">   42</a></span>  <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#ad4ee5f845fefc4901ea860a4788a4913">ShowerExampleTool::ShowerExampleTool</a>(<span class="keyword">const</span> fhicl::ParameterSet&amp; pset)</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    : <span class="comment">//Setup the algs and others here</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <a class="code hl_class" href="class_shower_reco_tools_1_1_i_shower_tool.html">IShowerTool</a>(pset.get&lt;fhicl::ParameterSet&gt;(<span class="stringliteral">&quot;BaseTools&quot;</span>))</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    , fPFParticleLabel(pset.get&lt;<a class="code hl_namespace" href="namespaceart.html">art</a>::InputTag&gt;(<span class="stringliteral">&quot;PFParticleLabel&quot;</span>))</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    , fVerbose(pset.get&lt;int&gt;(<span class="stringliteral">&quot;Verbose&quot;</span>))</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  {}</div>
</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="foldopen" id="foldopen00049" data-start="{" data-end="}">
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html#ac90c73f61aaeb240d9d04e1d9d322f68">   49</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#ac90c73f61aaeb240d9d04e1d9d322f68">ShowerExampleTool::InitialiseProducers</a>()</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">//Do you create something and you want to save it the event. Initialsie here. For every event with have a vector of showers so each one has a vertex. This is what we are saving. Make sure to use the name &quot;myvertex&quot; later down the line.</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    InitialiseProduct&lt;std::vector&lt;recob::Vertex&gt;&gt;(<span class="stringliteral">&quot;myvertex&quot;</span>);</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">//We can also do associations</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    InitialiseProduct&lt;art::Assns&lt;recob::Shower, recob::Vertex&gt;&gt;(<span class="stringliteral">&quot;myvertexassan&quot;</span>);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  }</div>
</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="foldopen" id="foldopen00058" data-start="{" data-end="}">
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html#a9b7728eb8dd7690fcb8d0a267a71b106">   58</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#a9b7728eb8dd7690fcb8d0a267a71b106">ShowerExampleTool::CalculateElement</a>(<span class="keyword">const</span> art::Ptr&lt;recob::PFParticle&gt;&amp; pfparticle,</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>                                          art::Event&amp; Event,</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>                                          <a class="code hl_class" href="classreco_1_1shower_1_1_shower_element_holder.html">reco::shower::ShowerElementHolder</a>&amp; ShowerEleHolder)</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">//In here calculate a shower or element (or multiple). It can be something used to create the recob::shower i.e. the direction. These have specific names so be careful to make these correctly. Alternative you can create something completely new e.g. recob::Vertex and add it the shower element holder</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="comment">//Now we are calculating the property of the shower like pfparticle. You have access to everything in the event. Maybe you want the vertex.</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="keyword">auto</span> <span class="keyword">const</span> vtxHandle = Event.getValidHandle&lt;std::vector&lt;recob::Vertex&gt;&gt;(<a class="code hl_variable" href="class_shower_reco_tools_1_1_shower_example_tool.html#a02c8d08463e7eda4ac89931287f9e59c">fPFParticleLabel</a>);</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    std::vector&lt;art::Ptr&lt;recob::Vertex&gt;&gt; vertices;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    art::fill_ptr_vector(vertices, vtxHandle);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">//Remember the module goes through the tools and if you want to (fcl param) it will loop over them twice. You can check to see if a element has been set with a specific name:</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="keywordtype">bool</span> shower_direction_set = ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#ac522626bb639eeca3061f46c7897bc60">CheckElement</a>(<span class="stringliteral">&quot;ShowerDirection&quot;</span>);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    geo::Vector_t ShowerDirection = {-999, -999, -999};</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">//Then you can go and get that element if you want to use it and fill it in for you.</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keywordflow">if</span> (shower_direction_set) { ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#a19122d1d5ac0da54ee1243140f08b292">GetElement</a>(<span class="stringliteral">&quot;ShowerDirection&quot;</span>, ShowerDirection); }</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">//Do some crazy physics - Some legacy code in here for ease.</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    recob::Vertex <span class="keyword">const</span>&amp; proposed_vertex = *vertices[0];</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keyword">auto</span> pos = proposed_vertex.position();</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="keywordflow">if</span> (ShowerDirection.X() &lt; 0) { pos *= -1.; }</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    recob::Vertex new_vertex{pos, {}, util::kBogusD, util::kBogusI};</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    geo::Point_t recobshower_err = pos * 0.1;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">//You can set elements of the recob::shower just choose the right name (you can acess them later). You can give the property an error anf this must be done the for standard recob::shower properties; The standard is to access the name via a fcl file.</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#aaf601e6b3373577dcd28837d9e4dc55a">SetElement</a>(pos, recobshower_err, <span class="stringliteral">&quot;ShowerStartPosition&quot;</span>);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="comment">//You can also set the same element with a different name so that you can compare downstream two tools.</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="comment">//The standard is to actually define the name in fcl.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#aaf601e6b3373577dcd28837d9e4dc55a">SetElement</a>(pos, recobshower_err, <span class="stringliteral">&quot;ShowerExampleTool_ShowerStartPosition&quot;</span>);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">//Or you can set one of the save elements</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#aaf601e6b3373577dcd28837d9e4dc55a">SetElement</a>(new_vertex, <span class="stringliteral">&quot;myvertex&quot;</span>);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">//Or a new unsave one.</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    std::vector&lt;double&gt; xyz_vec = {pos.X(), pos.Y(), pos.Z()};</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#aaf601e6b3373577dcd28837d9e4dc55a">SetElement</a>(xyz_vec, <span class="stringliteral">&quot;xyz&quot;</span>);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="comment">//If you want to check if your element was actually made before the shower is made you can set a bool. If partial showers is turned off then the shower will not be made if this element is not filled. Properties i.e. elements with errors i.e. ShowerStartPosition  will not be checked. There is no way to store properties in the Event, only products are stored. You can make your own class which holds the error. The defualt is not to check the element. The recob::shower properties are checked however.</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#aaf601e6b3373577dcd28837d9e4dc55a">SetElement</a>(xyz_vec, <span class="stringliteral">&quot;xyz&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">//You can see if an element will be checked before the shower is save with</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="keywordtype">bool</span> will_be_checked = ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#a4c2fe66407b9dcccf02dae0111ec97d4">CheckElementTag</a>(<span class="stringliteral">&quot;xyz&quot;</span>);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">if</span> (will_be_checked) { std::cout &lt;&lt; <span class="stringliteral">&quot;Element checked at save time&quot;</span> &lt;&lt; std::endl; }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">//You can also changed the tag.</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#a2cbc39acb2e4040478bafff1057bdcde">SetElementTag</a>(<span class="stringliteral">&quot;xyz&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">//Note: Elements that are actually saved because you defined them in InitialiseProducers will be checked regardless. We don&#39;t want you saving nothign now.</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">//You can also get the shower number that you are current one (the first shower number is 0).</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordtype">int</span> showernum = ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#a188ab9c2c2c30463b28ed3468c0aec49">GetShowerNumber</a>();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_shower_reco_tools_1_1_shower_example_tool.html#a4638c0021dc15cfc0d003fb9a8759f2c">fVerbose</a> &gt; 1) std::cout &lt;&lt; <span class="stringliteral">&quot;You on are shower: &quot;</span> &lt;&lt; showernum &lt;&lt; std::endl;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="comment">//You can also read out what ptr are set and what elements are set:.</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <a class="code hl_function" href="class_shower_reco_tools_1_1_i_shower_tool.html#a4c91238333bf8ae0906a55ad34022f00">PrintPtrs</a>();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_function" href="class_shower_reco_tools_1_1_i_shower_tool.html#a29565f79cb6af34e2468753dfa2cb5df">PrintPtr</a>(<span class="stringliteral">&quot;myvertex&quot;</span>);</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#a914222ada5ede6d25976dc90d1051bcd">PrintElements</a>();</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">//Remember to add make a new fcl parmas list for your new tool. For examles see showertools.fcl. And remember to add it the the list in the module fcl params list.</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  }</div>
</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="foldopen" id="foldopen00127" data-start="{" data-end="}">
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="class_shower_reco_tools_1_1_shower_example_tool.html#acf85d45c01af7b68c88846b41e236bae">  127</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_shower_reco_tools_1_1_shower_example_tool.html#acf85d45c01af7b68c88846b41e236bae">ShowerExampleTool::AddAssociations</a>(<span class="keyword">const</span> art::Ptr&lt;recob::PFParticle&gt;&amp; pfpPtr,</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                                         art::Event&amp; Event,</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                                         <a class="code hl_class" href="classreco_1_1shower_1_1_shower_element_holder.html">reco::shower::ShowerElementHolder</a>&amp; ShowerEleHolder)</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="comment">//Here you add elements to associations defined. You can get the art::Ptrs by  GetProducedElementPtr&lt;T&gt;. Then you can add single like a usally association using AddSingle&lt;assn&lt;T&gt;. Assn below.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="comment">//First check the element has been set</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">if</span> (!ShowerEleHolder.<a class="code hl_function" href="classreco_1_1shower_1_1_shower_element_holder.html#ac522626bb639eeca3061f46c7897bc60">CheckElement</a>(<span class="stringliteral">&quot;myvertex&quot;</span>)) {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_shower_reco_tools_1_1_shower_example_tool.html#a4638c0021dc15cfc0d003fb9a8759f2c">fVerbose</a>) mf::LogError(<span class="stringliteral">&quot;ShowerExampleTooAddAssn&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;vertex not set.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="comment">//Then you can get the size of the vector which the unique ptr hold so that you can do associations. If you are comfortable in the fact that your element will always be made when a shower is made you don&#39;t need to to do this you can just get the art ptr as:      const art::Ptr&lt;recob::Vertex&gt; vertexptr = GetProducedElementPtr&lt;recob::Vertex&gt;(&quot;myvertex&quot;, ShowerEleHolder);. Note doing this when you allow partial showers to be set can screw up the assocation for the partial shower.</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordtype">int</span> ptrsize = <a class="code hl_function" href="class_shower_reco_tools_1_1_i_shower_tool.html#a01b4300ef68f6d3d7c132b27ed7f7ab3">GetVectorPtrSize</a>(<span class="stringliteral">&quot;myvertex&quot;</span>);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keyword">const</span> art::Ptr&lt;recob::Vertex&gt; vertexptr =</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>      GetProducedElementPtr&lt;recob::Vertex&gt;(<span class="stringliteral">&quot;myvertex&quot;</span>, ShowerEleHolder, ptrsize);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="keyword">const</span> art::Ptr&lt;recob::Shower&gt; showerptr =</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>      GetProducedElementPtr&lt;recob::Shower&gt;(<span class="stringliteral">&quot;shower&quot;</span>, ShowerEleHolder);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    AddSingle&lt;art::Assns&lt;recob::Shower, recob::Vertex&gt;&gt;(showerptr, vertexptr, <span class="stringliteral">&quot;myvertexassan&quot;</span>);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  }</div>
</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>}</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>DEFINE_ART_CLASS_TOOL(<a class="code hl_class" href="class_shower_reco_tools_1_1_shower_example_tool.html">ShowerRecoTools::ShowerExampleTool</a>)</div>
<div class="ttc" id="a_i_shower_tool_8h_html"><div class="ttname"><a href="_i_shower_tool_8h.html">IShowerTool.h</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_i_shower_tool_html"><div class="ttname"><a href="class_shower_reco_tools_1_1_i_shower_tool.html">ShowerRecoTools::IShowerTool</a></div><div class="ttdef"><b>Definition</b> <a href="_i_shower_tool_8h_source.html#l00030">IShowerTool.h:30</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_i_shower_tool_html_a01b4300ef68f6d3d7c132b27ed7f7ab3"><div class="ttname"><a href="class_shower_reco_tools_1_1_i_shower_tool.html#a01b4300ef68f6d3d7c132b27ed7f7ab3">ShowerRecoTools::IShowerTool::GetVectorPtrSize</a></div><div class="ttdeci">int GetVectorPtrSize(std::string Name)</div><div class="ttdef"><b>Definition</b> <a href="_i_shower_tool_8h_source.html#l00158">IShowerTool.h:158</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_i_shower_tool_html_a29565f79cb6af34e2468753dfa2cb5df"><div class="ttname"><a href="class_shower_reco_tools_1_1_i_shower_tool.html#a29565f79cb6af34e2468753dfa2cb5df">ShowerRecoTools::IShowerTool::PrintPtr</a></div><div class="ttdeci">void PrintPtr(std::string Name)</div><div class="ttdef"><b>Definition</b> <a href="_i_shower_tool_8h_source.html#l00162">IShowerTool.h:162</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_i_shower_tool_html_a4c91238333bf8ae0906a55ad34022f00"><div class="ttname"><a href="class_shower_reco_tools_1_1_i_shower_tool.html#a4c91238333bf8ae0906a55ad34022f00">ShowerRecoTools::IShowerTool::PrintPtrs</a></div><div class="ttdeci">void PrintPtrs()</div><div class="ttdef"><b>Definition</b> <a href="_i_shower_tool_8h_source.html#l00160">IShowerTool.h:160</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html">ShowerRecoTools::ShowerExampleTool</a></div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00018">ShowerExampleTool_tool.cc:18</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html_a02c8d08463e7eda4ac89931287f9e59c"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html#a02c8d08463e7eda4ac89931287f9e59c">ShowerRecoTools::ShowerExampleTool::fPFParticleLabel</a></div><div class="ttdeci">art::InputTag fPFParticleLabel</div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00038">ShowerExampleTool_tool.cc:38</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html_a4638c0021dc15cfc0d003fb9a8759f2c"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html#a4638c0021dc15cfc0d003fb9a8759f2c">ShowerRecoTools::ShowerExampleTool::fVerbose</a></div><div class="ttdeci">int fVerbose</div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00039">ShowerExampleTool_tool.cc:39</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html_a9b7728eb8dd7690fcb8d0a267a71b106"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html#a9b7728eb8dd7690fcb8d0a267a71b106">ShowerRecoTools::ShowerExampleTool::CalculateElement</a></div><div class="ttdeci">int CalculateElement(const art::Ptr&lt; recob::PFParticle &gt; &amp;pfparticle, art::Event &amp;Event, reco::shower::ShowerElementHolder &amp;ShowerEleHolder) override</div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00058">ShowerExampleTool_tool.cc:58</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html_ac90c73f61aaeb240d9d04e1d9d322f68"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html#ac90c73f61aaeb240d9d04e1d9d322f68">ShowerRecoTools::ShowerExampleTool::InitialiseProducers</a></div><div class="ttdeci">void InitialiseProducers() override</div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00049">ShowerExampleTool_tool.cc:49</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html_acf85d45c01af7b68c88846b41e236bae"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html#acf85d45c01af7b68c88846b41e236bae">ShowerRecoTools::ShowerExampleTool::AddAssociations</a></div><div class="ttdeci">int AddAssociations(const art::Ptr&lt; recob::PFParticle &gt; &amp;pfpPtr, art::Event &amp;Event, reco::shower::ShowerElementHolder &amp;ShowerEleHolder) override</div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00127">ShowerExampleTool_tool.cc:127</a></div></div>
<div class="ttc" id="aclass_shower_reco_tools_1_1_shower_example_tool_html_ad4ee5f845fefc4901ea860a4788a4913"><div class="ttname"><a href="class_shower_reco_tools_1_1_shower_example_tool.html#ad4ee5f845fefc4901ea860a4788a4913">ShowerRecoTools::ShowerExampleTool::ShowerExampleTool</a></div><div class="ttdeci">ShowerExampleTool(const fhicl::ParameterSet &amp;pset)</div><div class="ttdef"><b>Definition</b> <a href="_shower_example_tool__tool_8cc_source.html#l00042">ShowerExampleTool_tool.cc:42</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html">reco::shower::ShowerElementHolder</a></div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00214">ShowerElementHolder.hh:214</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_a188ab9c2c2c30463b28ed3468c0aec49"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#a188ab9c2c2c30463b28ed3468c0aec49">reco::shower::ShowerElementHolder::GetShowerNumber</a></div><div class="ttdeci">int GetShowerNumber() const</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00603">ShowerElementHolder.hh:603</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_a19122d1d5ac0da54ee1243140f08b292"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#a19122d1d5ac0da54ee1243140f08b292">reco::shower::ShowerElementHolder::GetElement</a></div><div class="ttdeci">int GetElement(const std::string &amp;Name, T &amp;Element) const</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00219">ShowerElementHolder.hh:219</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_a2cbc39acb2e4040478bafff1057bdcde"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#a2cbc39acb2e4040478bafff1057bdcde">reco::shower::ShowerElementHolder::SetElementTag</a></div><div class="ttdeci">void SetElementTag(const std::string &amp;Name, bool checkelement)</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00569">ShowerElementHolder.hh:569</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_a4c2fe66407b9dcccf02dae0111ec97d4"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#a4c2fe66407b9dcccf02dae0111ec97d4">reco::shower::ShowerElementHolder::CheckElementTag</a></div><div class="ttdeci">bool CheckElementTag(const std::string &amp;Name) const</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00542">ShowerElementHolder.hh:542</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_a914222ada5ede6d25976dc90d1051bcd"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#a914222ada5ede6d25976dc90d1051bcd">reco::shower::ShowerElementHolder::PrintElements</a></div><div class="ttdeci">void PrintElements() const</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00606">ShowerElementHolder.hh:606</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_aaf601e6b3373577dcd28837d9e4dc55a"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#aaf601e6b3373577dcd28837d9e4dc55a">reco::shower::ShowerElementHolder::SetElement</a></div><div class="ttdeci">void SetElement(T &amp;dataproduct, const std::string &amp;Name, bool checktag=false)</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00405">ShowerElementHolder.hh:405</a></div></div>
<div class="ttc" id="aclassreco_1_1shower_1_1_shower_element_holder_html_ac522626bb639eeca3061f46c7897bc60"><div class="ttname"><a href="classreco_1_1shower_1_1_shower_element_holder.html#ac522626bb639eeca3061f46c7897bc60">reco::shower::ShowerElementHolder::CheckElement</a></div><div class="ttdeci">bool CheckElement(const std::string &amp;Name) const</div><div class="ttdef"><b>Definition</b> <a href="_shower_element_holder_8hh_source.html#l00470">ShowerElementHolder.hh:470</a></div></div>
<div class="ttc" id="anamespace_shower_reco_tools_html"><div class="ttname"><a href="namespace_shower_reco_tools.html">ShowerRecoTools</a></div><div class="ttdef"><b>Definition</b> <a href="_shower_direction_cheater__tool_8cc_source.html#l00022">ShowerDirectionCheater_tool.cc:22</a></div></div>
<div class="ttc" id="anamespaceart_html"><div class="ttname"><a href="namespaceart.html">art</a></div><div class="ttdef"><b>Definition</b> <a href="_l_ar_pandora_event_8h_source.html#l00026">LArPandoraEvent.h:26</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.10.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="dir_da4551a5c6e7bf3923624e25b1a0af73.html">larpandora</a></li><li class="navelem"><a class="el" href="dir_7b958f4de002ca6b0ce84ad1a283e2af.html">larpandora</a></li><li class="navelem"><a class="el" href="dir_5d1a405e0cf8bfa68862461ec173b60c.html">LArPandoraEventBuilding</a></li><li class="navelem"><a class="el" href="dir_19b562e15fb6365a053477dd463f24f6.html">LArPandoraShower</a></li><li class="navelem"><a class="el" href="dir_767c04e4b53b2d1778ad25a38fc02fe5.html">Tools</a></li><li class="navelem"><a class="el" href="_shower_example_tool__tool_8cc.html">ShowerExampleTool_tool.cc</a></li>
    </ul>
  </div>
  </body>
  </html>